{"version":3,"file":"utils.js","names":["_fs","_interopRequireDefault","require","_util","obj","__esModule","default","readdir","promisify","fs","unlink","deleteAllAvatars","absoluteFolderPath","files","unlinkPromises","map","filename","includes","console","log","Promise","all","err","exports","isValidUrl","str","urlRegex","url","RegExp","length","test"],"sources":["../../src/utils/utils.js"],"sourcesContent":["import fs from 'fs';\nimport { promisify } from 'util';\nconst readdir = promisify(fs.readdir);\nconst unlink = promisify(fs.unlink);\n\nexport const deleteAllAvatars = async (absoluteFolderPath) => {\n  try {\n    const files = await readdir(absoluteFolderPath);\n    const unlinkPromises = files.map((filename) => {\n      if (!['avatar0.jpg', 'avatar1.jpg', 'avatar2.jpg'].includes(filename)) {\n        console.log('Deleting avatar: ', filename);\n        unlink(`${absoluteFolderPath}/${filename}`);\n      }\n    });\n    return Promise.all(unlinkPromises);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const isValidUrl = (str) => {\n  var urlRegex =\n    '^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$';\n  var url = new RegExp(urlRegex, 'i');\n  return str.length < 2083 && url.test(str);\n};\n"],"mappings":";;;;;;AAAA,IAAAA,GAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AAAiC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AACjC,MAAMG,OAAO,GAAG,IAAAC,eAAS,EAACC,WAAE,CAACF,OAAO,CAAC;AACrC,MAAMG,MAAM,GAAG,IAAAF,eAAS,EAACC,WAAE,CAACC,MAAM,CAAC;AAE5B,MAAMC,gBAAgB,GAAG,MAAOC,kBAAkB,IAAK;EAC5D,IAAI;IACF,MAAMC,KAAK,GAAG,MAAMN,OAAO,CAACK,kBAAkB,CAAC;IAC/C,MAAME,cAAc,GAAGD,KAAK,CAACE,GAAG,CAAEC,QAAQ,IAAK;MAC7C,IAAI,CAAC,CAAC,aAAa,EAAE,aAAa,EAAE,aAAa,CAAC,CAACC,QAAQ,CAACD,QAAQ,CAAC,EAAE;QACrEE,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEH,QAAQ,CAAC;QAC1CN,MAAM,CAAE,GAAEE,kBAAmB,IAAGI,QAAS,EAAC,CAAC;MAC7C;IACF,CAAC,CAAC;IACF,OAAOI,OAAO,CAACC,GAAG,CAACP,cAAc,CAAC;EACpC,CAAC,CAAC,OAAOQ,GAAG,EAAE;IACZJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAAC;EAClB;AACF,CAAC;AAACC,OAAA,CAAAZ,gBAAA,GAAAA,gBAAA;AAEK,MAAMa,UAAU,GAAIC,GAAG,IAAK;EACjC,IAAIC,QAAQ,GACV,6YAA6Y;EAC/Y,IAAIC,GAAG,GAAG,IAAIC,MAAM,CAACF,QAAQ,EAAE,GAAG,CAAC;EACnC,OAAOD,GAAG,CAACI,MAAM,GAAG,IAAI,IAAIF,GAAG,CAACG,IAAI,CAACL,GAAG,CAAC;AAC3C,CAAC;AAACF,OAAA,CAAAC,UAAA,GAAAA,UAAA"}