{"version":3,"file":"Message.js","names":["_mongoose","_interopRequireDefault","require","_joi","obj","__esModule","default","Schema","mongoose","messageSchema","text","type","String","required","user","Types","ObjectId","ref","timestamps","methods","toJSON","id","_id","createdAt","updatedAt","validateMessage","message","schema","Joi","string","min","max","validate","exports","Message","model","_default"],"sources":["../../src/models/Message.js"],"sourcesContent":["import mongoose from 'mongoose';\nimport Joi from 'joi';\nconst { Schema } = mongoose;\n\nconst messageSchema = new Schema(\n  {\n    text: {\n      type: String,\n      required: true,\n    },\n    user: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },\n  },\n  { timestamps: true },\n);\n\nmessageSchema.methods.toJSON = function () {\n  return {\n    id: this._id,\n    text: this.text,\n    createdAt: this.createdAt,\n    updatedAt: this.updatedAt,\n    user: this.user.toJSON(),\n  };\n};\n\nexport const validateMessage = (message) => {\n  const schema = {\n    text: Joi.string().min(5).max(300).required(),\n  };\n  return Joi.validate(message, schema);\n};\n\nconst Message = mongoose.model('Message', messageSchema);\n\nexport default Message;\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,IAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAsB,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AACtB,MAAM;EAAEG;AAAO,CAAC,GAAGC,iBAAQ;AAE3B,MAAMC,aAAa,GAAG,IAAIF,MAAM,CAC9B;EACEG,IAAI,EAAE;IACJC,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE;EACZ,CAAC;EACDC,IAAI,EAAE;IAAEH,IAAI,EAAEH,iBAAQ,CAACD,MAAM,CAACQ,KAAK,CAACC,QAAQ;IAAEC,GAAG,EAAE;EAAO;AAC5D,CAAC,EACD;EAAEC,UAAU,EAAE;AAAK,CAAC,CACrB;AAEDT,aAAa,CAACU,OAAO,CAACC,MAAM,GAAG,YAAY;EACzC,OAAO;IACLC,EAAE,EAAE,IAAI,CAACC,GAAG;IACZZ,IAAI,EAAE,IAAI,CAACA,IAAI;IACfa,SAAS,EAAE,IAAI,CAACA,SAAS;IACzBC,SAAS,EAAE,IAAI,CAACA,SAAS;IACzBV,IAAI,EAAE,IAAI,CAACA,IAAI,CAACM,MAAM;EACxB,CAAC;AACH,CAAC;AAEM,MAAMK,eAAe,GAAIC,OAAO,IAAK;EAC1C,MAAMC,MAAM,GAAG;IACbjB,IAAI,EAAEkB,YAAG,CAACC,MAAM,EAAE,CAACC,GAAG,CAAC,CAAC,CAAC,CAACC,GAAG,CAAC,GAAG,CAAC,CAAClB,QAAQ;EAC7C,CAAC;EACD,OAAOe,YAAG,CAACI,QAAQ,CAACN,OAAO,EAAEC,MAAM,CAAC;AACtC,CAAC;AAACM,OAAA,CAAAR,eAAA,GAAAA,eAAA;AAEF,MAAMS,OAAO,GAAG1B,iBAAQ,CAAC2B,KAAK,CAAC,SAAS,EAAE1B,aAAa,CAAC;AAAC,IAAA2B,QAAA,GAE1CF,OAAO;AAAAD,OAAA,CAAA3B,OAAA,GAAA8B,QAAA"}